---
export interface Props {
   pixelId: string;
}

const { pixelId } = Astro.props;
---

<script src="/js/metaPixel.js" is:inline></script>
<script define:vars={{ pixelId }}>
   document.addEventListener('DOMContentLoaded', () => {
      if (window.metaPixelUtils) {
         window.metaPixelUtils.initMetaPixel(pixelId);

         // Alias global con verificaci√≥n mejorada
         window.metaPixel = {
            track: async (eventName, customData = {}, userData = {}) => {
               // console.log(`üéØ Tracking ${eventName} - Both client and server`);
               return await window.metaPixelUtils.trackEvent(eventName, customData, userData);
            },
            trackPageView: async (customData = {}) => {
               // console.log('üìÑ Tracking PageView - Both client and server');
               return await window.metaPixelUtils.trackPageView(customData);
            },
         };

         // console.log('‚úÖ Meta Pixel ready with server events');
      } else {
         // console.error('‚ùå Meta Pixel utils not loaded');
      }
   });
</script>
